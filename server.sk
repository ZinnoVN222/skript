on join:
    wait 5 ticks
    if player has permission "group.trumcuoi":
        set max health of player to 20
    else if player has permission "group.boday":
        set max health of player to 18
    else if player has permission "group.thulinh":
        set max health of player to 16
    else if player has permission "group.boypho":
        set max health of player to 13
    else if player has permission "group.danchoi":
        set max health of player to 11
    else:
        set max health of player to 10

every 1 seconds:
    loop all players:
        if loop-player has permission "group.trumcuoi":
            set max health of loop-player to 20
        else if loop-player has permission "group.boday":
            set max health of loop-player to 18
        else if loop-player has permission "group.thulinh":
            set max health of loop-player to 16
        else if loop-player has permission "group.boypho":
            set max health of loop-player to 13
        else if loop-player has permission "group.danchoi":
            set max health of loop-player to 11
        else:
            set max health of loop-player to 10

command /off:
    permission: skript.stopluon
    trigger:
        loop 10 times:
            set {_i} to 11 - loop-number
            broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cServer sáº½ dá»«ng trong Â§e%{_i}% Â§cgiÃ¢y!"
            wait 1 second
        broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cÂ§lServer Ä‘ang dá»«ng ngay bÃ¢y giá»!"
        stop server
		
command /tatsv <number>:
    permission: skript.stop
    trigger:
        set {_total} to arg 1 * 3600  # Tá»•ng giÃ¢y
        set {_remaining} to {_total}
        broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cServer sáº½ dá»«ng trong Â§e%arg 1% Â§ctiáº¿ng!"

        # Cá»© sau má»—i 30 phÃºt thÃ¬ thÃ´ng bÃ¡o
        while {_remaining} > 600:  # Láº·p cho Ä‘áº¿n cÃ²n dÆ°á»›i 10 phÃºt
            wait 1800 seconds  # Chá» 30 phÃºt
            subtract 1800 from {_remaining}
            set {_h} to floor({_remaining} / 3600)
            set {_m} to floor(({_remaining} - ({_h} * 3600)) / 60)
            if {_h} > 0:
                broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cServer sáº½ dá»«ng trong Â§e%{_h}% tiáº¿ng %{_m}% phÃºtÂ§c!"
            else:
                broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cServer sáº½ dá»«ng trong Â§e%{_m}% phÃºtÂ§c!"

        # BÃ¡o cÃ²n 10 phÃºt
        wait {_remaining} - 10 seconds
        broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cServer sáº½ dá»«ng trong Â§e10 giÃ¢yÂ§c!"

        # Äáº¿m ngÆ°á»£c 10 giÃ¢y
        loop 10 times:
            set {_i} to 11 - loop-number
            broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cServer sáº½ dá»«ng trong Â§e%{_i}% Â§cgiÃ¢y!"
            wait 1 second

        broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§cÂ§lServer Ä‘ang dá»«ng ngay bÃ¢y giá»!"
        stop server


command /tb <text>:
    permission: skript.tb
    trigger:
        broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§f%arg-1%"
		
command /ad <text>:
    permission: skript.ad
    trigger:
        broadcast "Â§eÂ§k|i| Â§xÂ§fÂ§4Â§2Â§0Â§2Â§0Â§lAÂ§xÂ§fÂ§6Â§3Â§0Â§3Â§0Â§lDÂ§xÂ§fÂ§cÂ§cÂ§cÂ§cÂ§cÂ§lMÂ§xÂ§fÂ§eÂ§eÂ§eÂ§eÂ§eÂ§lIÂ§xÂ§fÂ§fÂ§fÂ§fÂ§fÂ§fÂ§lN Â§eÂ§k|i| Â§f%arg-1%"

command /muarank [<text>]:
    trigger:
        if arg-1 is not set:
            send title "&cLá»–I!" with subtitle "&fBáº¡n pháº£i nháº­p tÃªn rank Ä‘á»ƒ mua!" to player for 5 seconds
            stop

        set {_rank} to arg-1
        set {_cost} to 0
        set {_rank_display} to ""
        set {_ranks::*} to "danchoi", "boypho", "thulinh", "boday", "trumcuoi"

        # GÃ¡n giÃ¡ vÃ  tÃªn mÃ u cho tá»«ng rank
        if "%{_rank}%" is "danchoi":
            set {_cost} to 20000000
            set {_rank_display} to "Â§7[Â§fDÃ¢n Â§6ChÆ¡iÂ§7]"
        else if "%{_rank}%" is "boypho":
            set {_cost} to 80000000
            set {_rank_display} to "Â§7[Â§fBoy Â§cPhá»‘Â§7]"
        else if "%{_rank}%" is "thulinh":
            set {_cost} to 200000000
            set {_rank_display} to "Â§7[Â§fThá»§ Â§3LÄ©nhÂ§7]"
        else if "%{_rank}%" is "boday":
            set {_cost} to 410000000
            set {_rank_display} to "Â§fÂ§k;; Â§xÂ§2Â§0Â§9Â§CÂ§FÂ§FÂ§lBÂ§xÂ§2Â§EÂ§AÂ§AÂ§FÂ§5Â§lá»‘ Â§xÂ§4Â§BÂ§CÂ§5Â§EÂ§2Â§lÄÂ§xÂ§5Â§AÂ§DÂ§2Â§DÂ§9Â§lÃ¢Â§xÂ§6Â§8Â§EÂ§0Â§CÂ§FÂ§ly Â§fÂ§k;;"
        else if "%{_rank}%" is "trumcuoi":
            set {_cost} to 660000000
            set {_rank_display} to "Â§fÂ§lÂ§k|Â§cÂ§k| Â§xÂ§EÂ§FÂ§BÂ§FÂ§3Â§DÂ§lTÂ§xÂ§EÂ§DÂ§AÂ§7Â§4Â§1Â§lrÂ§xÂ§EÂ§BÂ§8Â§EÂ§4Â§6Â§lÃ¹Â§xÂ§EÂ§9Â§7Â§6Â§4Â§AÂ§lm Â§xÂ§EÂ§DÂ§5Â§8Â§5Â§AÂ§lCÂ§xÂ§FÂ§3Â§5Â§3Â§6Â§6Â§luÂ§xÂ§FÂ§9Â§4Â§EÂ§7Â§2Â§lá»‘Â§xÂ§FÂ§FÂ§4Â§9Â§7Â§EÂ§li Â§6Â§k|Â§fÂ§lÂ§k|"
        else:
            send title "&cRANK KHÃ”NG Tá»’N Táº I!" with subtitle "&fdÃ¹ng lá»‡nh &e/pcrank &fÄ‘á»ƒ mua" to player for 5 seconds
            stop

        # XÃ¡c Ä‘á»‹nh rank hiá»‡n táº¡i cá»§a player (náº¿u chÆ°a cÃ³ thÃ¬ máº·c Ä‘á»‹nh lÃ  0)
        set {_currentRank} to ""
        set {_currentIndex} to 0
        loop {_ranks::*}:
            if player has permission "group.%loop-value%":
                set {_currentRank} to "%loop-value%"
        if {_currentRank} is not "":
            loop {_ranks::*}:
                add 1 to {_i}
                if "%loop-value%" is "%{_currentRank}%":
                    set {_currentIndex} to {_i}
        # XÃ¡c Ä‘á»‹nh index cá»§a rank muá»‘n mua
        set {_targetIndex} to 0
        loop {_ranks::*}:
            add 1 to {_j}
            if "%loop-value%" is "%{_rank}%":
                set {_targetIndex} to {_j}

        # Chá»‰ cho phÃ©p mua rank káº¿ tiáº¿p
        if {_targetIndex} - {_currentIndex} != 1:
            send title "&cKHÃ”NG THá»‚ MUA NHáº¢Y!" with subtitle "&fBáº¡n chá»‰ cÃ³ thá»ƒ mua rank káº¿ tiáº¿p!" to player for 5 seconds
            stop

        if balance of player < {_cost}:
            send title "&cKHÃ”NG Äá»¦ TIá»€N!" with subtitle "&fCáº§n %{_cost}%Ä‘ Ä‘á»ƒ mua rank nÃ y" to player for 5 seconds
            stop

        remove {_cost} from balance of player
        execute console command "lp user %player% parent set %{_rank}%"
        execute console command "chatex reload"
        send title "&aMUA RANK THÃ€NH CÃ”NG!" with subtitle "&c-%{_cost}%Ä‘ &fvÃ o tÃ i khoáº£n!" to player for 5 seconds
        send "&aâœ” Báº¡n Ä‘Ã£ mua thÃ nh cÃ´ng rank %{_rank_display}% &avá»›i giÃ¡ &c%{_cost}%Ä‘!"
        broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§fÄ‘áº¡i gia Â§cÂ§l%player% Â§fÄ‘Ã£ bá» ra Â§e%{_cost}%Ä‘ Â§fÄ‘á»ƒ mua rank %{_rank_display}%"

options:
  cooldown-seconds: 7200

# Biáº¿n Ä‘áº¿m thá»i gian má»—i ngÆ°á»i
every 1 second:
  loop all players:
    if {freemeattime.%loop-player%} is set:
      add 1 to {freemeattime.%loop-player%}

command /thitbo:
  permission: group.danchoi
  trigger:
    if {freemeattime.%player%} is not set:
      # Láº§n Ä‘áº§u nháº­n
      give player 5 cooked_beef
      send "&aBáº¡n Ä‘Ã£ nháº­n Ä‘Æ°á»£c 5 thá»‹t bÃ² miá»…n phÃ­!"
      set {freemeattime.%player%} to 0
      stop
    if {freemeattime.%player%} < {@cooldown-seconds}:
      set {_remain} to {@cooldown-seconds} - {freemeattime.%player%}
      set {_min} to floor({_remain} / 60)
      set {_sec} to {_remain} - ({_min} * 60)
      send "&cBáº¡n Ä‘Ã£ nháº­n thá»‹t rá»“i! Vui lÃ²ng Ä‘á»£i &6%{_min}% phÃºt &6%{_sec}% giÃ¢y &cÄ‘á»ƒ nháº­n tiáº¿p."
      stop
    # Äá»§ thá»i gian rá»“i
    give player 5 cooked_beef
    send "&aBáº¡n Ä‘Ã£ nháº­n Ä‘Æ°á»£c 5 thá»‹t bÃ² miá»…n phÃ­!"
    set {freemeattime.%player%} to 0

command /craft:
    permission: group.thulinh
    permission message: Â§eÂ§k|i| Â§xÂ§fÂ§4Â§2Â§0Â§2Â§0Â§lAÂ§xÂ§fÂ§6Â§3Â§0Â§3Â§0Â§lDÂ§xÂ§fÂ§cÂ§cÂ§cÂ§cÂ§cÂ§lMÂ§xÂ§fÂ§eÂ§eÂ§eÂ§eÂ§eÂ§lIÂ§xÂ§fÂ§fÂ§fÂ§fÂ§fÂ§fÂ§lN Â§eÂ§k|i| &fMua rank Â§7[Â§fThá»§ Â§3LÄ©nhÂ§7] &ftrá»Ÿ lÃªn Ä‘á»ƒ dÃ¹ng Ä‘Æ°á»£c lá»‡nh nÃ y!
    trigger:
        open crafting table for player

command /feed:
    trigger:
        # XÃ¡c Ä‘á»‹nh cooldown theo group
        if player has permission "group.trumcuoi":
            set {_cooldown} to 20 minutes
        else if player has permission "group.boday":
            set {_cooldown} to 40 minutes
        else:
            send "&cBáº¡n khÃ´ng cÃ³ quyá»n dÃ¹ng lá»‡nh nÃ y."
            stop

        # Kiá»ƒm tra cooldown
        if {feed.cooldown.%uuid of player%} is not set:
            set {feed.cooldown.%uuid of player%} to now - 1 hour

        set {_lastUsed} to {feed.cooldown.%uuid of player%}
        set {_now} to now

        if difference between {_now} and {_lastUsed} < {_cooldown}:
            set {_remain} to {_cooldown} - (difference between {_now} and {_lastUsed})
            set {_minutes} to ceil({_remain} / 60 seconds)
            send "Â§eÂ§k|i| Â§xÂ§fÂ§4Â§2Â§0Â§2Â§0Â§lAÂ§xÂ§fÂ§6Â§3Â§0Â§3Â§0Â§lDÂ§xÂ§fÂ§cÂ§cÂ§cÂ§cÂ§cÂ§lMÂ§xÂ§fÂ§eÂ§eÂ§eÂ§eÂ§eÂ§lIÂ§xÂ§fÂ§fÂ§fÂ§fÂ§fÂ§fÂ§lN Â§eÂ§k|i| &fBáº¡n cáº§n chá» thÃªm &c%{_minutes}% phÃºt"
            stop

        # Há»“i thá»©c Äƒn
        set player's food level to 20
        set player's saturation to 20
        send "Â§eÂ§k|i| Â§xÂ§fÂ§4Â§2Â§0Â§2Â§0Â§lAÂ§xÂ§fÂ§6Â§3Â§0Â§3Â§0Â§lDÂ§xÂ§fÂ§cÂ§cÂ§cÂ§cÂ§cÂ§lMÂ§xÂ§fÂ§eÂ§eÂ§eÂ§eÂ§eÂ§lIÂ§xÂ§fÂ§fÂ§fÂ§fÂ§fÂ§fÂ§lN Â§eÂ§k|i| &fÄÃ£ há»“i Ä‘áº§y thá»©c Äƒn!" to player
        set {feed.cooldown.%uuid of player%} to now

command /xemslot <text> <number>:
    permission: admin.boxmm
    trigger:
        set {_box} to argument 1
        set {_slot} to argument 2

        send "&7Slot %{_slot}% cá»§a há»™p %{_box}%:"
        send "- Item: %{vp.%{_box}%::%{_slot}%::item}%"
        send "- Tá»‰ lá»‡: %{vp.%{_box}%::%{_slot}%::chance}%"
command /boxadd <text> <number> <number>:
    permission: admin.boxsetting
    trigger:
        set {_box} to argument 1
        set {_slot} to argument 2
        set {_chance} to argument 3

        if player's tool is air:
            send "&cBáº¡n khÃ´ng cáº§m váº­t pháº©m nÃ o trÃªn tay!"
            stop

        # LÆ°u item (Ä‘Æ¡n giáº£n, khÃ´ng clone)
        set {vp.%{_box}%::%{_slot}%::item} to player's tool
        set {vp.%{_box}%::%{_slot}%::chance} to {_chance}

        send "&aâœ” ÄÃ£ lÆ°u váº­t pháº©m vÃ o há»™p &b%{_box}% &a- slot &e%{_slot}% &avá»›i tá»‰ lá»‡ &e%{_chance}%"

command /muahop <text>:
    trigger:
        set {_box} to argument 1
        # Äáº·t tÃªn hiá»ƒn thá»‹ cho tá»«ng loáº¡i há»™p
        if {_box} = "lo":
            set {_perm} to "group.danchoi"
            set {_cost} to 50000
            set {_box_name} to "&7[&fLá»&7]"
        else if {_box} = "coban":
            set {_perm} to "group.boypho"
            set {_cost} to 300000
            set {_box_name} to "&7[&aCÆ¡ Báº£n&7]"
        else if {_box} = "vip":
            set {_perm} to "group.thulinh"
            set {_cost} to 500000
            set {_box_name} to "&7[&6VIP&7]"
        else if {_box} = "legend":
            set {_perm} to "group.boday"
            set {_cost} to 800000
            set {_box_name} to "&7[&3Legend&7]"
        else if {_box} = "mythic":
            set {_perm} to "group.trumcuoi"
            set {_cost} to 1000000
            set {_box_name} to "&7[&dMythic&7]"
        else:
            send "&câŒ Há»™p khÃ´ng há»£p lá»‡! DÃ¹ng: lo, coban, vip, legend, mythic"
            stop

        if player does not have permission {_perm}:
            send "&câŒ Báº¡n khÃ´ng cÃ³ quyá»n mua há»™p %{_box_name}%&c!"
            stop

        if player's balance < {_cost}:
            send "&câŒ Báº¡n khÃ´ng Ä‘á»§ tiá»n Ä‘á»ƒ mua há»™p %{_box_name}%&c! Cáº§n &e%{_cost}%Ä‘"
            stop

        execute console command "eco take %player% %{_cost}%"
        send "&ağŸ’° ÄÃ£ trá»« &e%{_cost}%Ä‘&a. Má»Ÿ há»™p %{_box_name}%..."

        send "&7Äang tÃ¬m pháº§n thÆ°á»Ÿng..."
        wait 20 ticks

        set {_got} to false

        loop 8 times:
            set {_index} to loop-number
            set {_item} to {vp.%{_box}%::%{_index}%::item}
            set {_chance} to {vp.%{_box}%::%{_index}%::chance}
            if {_item} is set:
                set {_roll} to random integer between 1 and 100
                if {_roll} <= {_chance}:
                    give {_item} to player
                    # Hiá»‡u á»©ng nháº¥p nhÃ¡y tÃªn há»™p dÃ¹ng tÃªn hiá»ƒn thá»‹
                    loop 8 times:
                        send title "&cMá»Ÿ Há»™p %{_box_name}%" with subtitle "&fğŸ‰ Äang chá»n pháº§n thÆ°á»Ÿng..." to player
                        wait 5 ticks
                        send title "&fMá»Ÿ Há»™p %{_box_name}%" with subtitle "&dğŸ‰ Äang chá»n pháº§n thÆ°á»Ÿng..." to player
                        wait 5 ticks

                    # Láº¥y tÃªn item Ä‘á»ƒ thÃ´ng bÃ¡o
					
                    set {_item_name} to "%{_item}%"

                    broadcast "Â§7[Â§6ThÃ´ng BÃ¡oÂ§7] Â§aÂ§l%player% Â§fdÃ¹ng Â§e%{_cost}%Ä‘ Â§fmua há»™p %{_box_name}% Â§fnháº­n Ä‘Æ°á»£c Â§a%{_item_name}%"
                    set {_got} to true
                    stop

        if {_got} is false:
            send "&câŒ Ráº¥t tiáº¿c, báº¡n khÃ´ng nháº­n Ä‘Æ°á»£c pháº§n thÆ°á»Ÿng nÃ o tá»« há»™p %{_box_name}%!" to player

command /nearpos [<number>]:
    permission: admin.near
    description: Hiá»ƒn thá»‹ vá»‹ trÃ­ cá»§a ngÆ°á»i chÆ¡i gáº§n báº¡n trong bÃ¡n kÃ­nh (máº·c Ä‘á»‹nh 50 block)
    usage: /nearpos [bÃ¡n_kÃ­nh]
    trigger:
        set {_radius} to arg-1
        if {_radius} is not set:
            set {_radius} to 50
        clear {_near::*}
        loop all players:
            if loop-player is not player:
                if distance between player and loop-player <= {_radius}:
                    add loop-player to {_near::*}
        if size of {_near::*} is 0:
            send "&cKhÃ´ng cÃ³ ngÆ°á»i chÆ¡i nÃ o gáº§n báº¡n trong bÃ¡n kÃ­nh %{_radius}% block." to player
        else:
            send "&aNgÆ°á»i chÆ¡i gáº§n báº¡n trong bÃ¡n kÃ­nh %{_radius}% block:" to player
            loop {_near::*}:
                set {_loc} to location of loop-value
                send "&7- %loop-value%: &eX: %x-coordinate of {_loc}% &eY: %y-coordinate of {_loc}% &eZ: %z-coordinate of {_loc}%" to player

command /ganmoi:
    trigger:
        if player's tool is fishing rod:
            make player execute command "emf applybaits"
            send "&aÂ§7[Â§bCÃ¢u CÃ¡Â§7] Â§fcho má»“i vÃ o Ã´ Ä‘á»ƒ gáº¯n!"
        else:
            send title "Â§6Â§lThiáº¿u Cáº§n CÃ¢u" with subtitle "Â§ccáº§m cáº§n cÃ¢u lÃªn Ä‘á»ƒ má»Ÿ Ä‘Æ°á»£c Ã´ má»“i" for 5 seconds
			
command /trutien <offlineplayer> <number>:
    permission: op
    trigger:
        if arg-2 < 0:
            send "&cSá»‘ tiá»n pháº£i lá»›n hÆ¡n 0."
            stop
        if balance of arg-1 < arg-2:
            send "&cNgÆ°á»i chÆ¡i nÃ y khÃ´ng Ä‘á»§ tiá»n."
            stop
        remove arg-2 from balance of arg-1
        send "&aÄÃ£ trá»« %arg-2% tiá»n cá»§a %arg-1%!"